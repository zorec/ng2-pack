<div>

  <!-- NOTE: do not use pointer cursor when sorting is disabled -->
  <span class="col-label" (click)="onSortColumn(column)" >
    {{ column?.config.text || column?.config.id  }}
    <i *ngIf="showSortIcon(column, 'string', 'asc')" class="ico-col-sort ico-col-sort--asc"><i>A</i><i>Z</i><i>↓</i></i>
    <i *ngIf="showSortIcon(column, 'string', 'desc')" class="ico-col-sort ico-col-sort--desc"><i>Z</i><i>A</i><i>↓</i></i>
    <i *ngIf="showSortIcon(column, 'number', 'asc')" class="ico-col-sort ico-col-sort--asc"><i>0</i><i>9</i><i>↓</i></i>
    <i *ngIf="showSortIcon(column, 'number', 'desc')" class="ico-col-sort ico-col-sort--desc"><i>9</i><i>0</i><i>↓</i></i>
  </span>

  <div class="btn-group col-menu" dropdown>
    <a
      dropdown-open
      class="btn btn-sm btn-secondary dropdown-toggle"
      [id]="column?.config.id + '-dropdown'">
    </a>

    <ul class="dropdown-menu dropdown-menu-right" dropdownMenu attr.aria-labelledby="{{column?.config.id}}-dropdown">

      <li *ngIf="!isSortingDisabled(column)">
        <a class="dropdown-item" (click)="onSortColumn(column, 'asc')">
          {{ 'table.sort' | t}}
          <span *ngIf="column?.config.sortType === 'number'">0&rarr;9</span>
          <span *ngIf="column?.config.sortType !== 'number'">A&rarr;Z</span>
        </a>
      </li>

      <li *ngIf="!isSortingDisabled(column)">
        <a class="dropdown-item" (click)="onSortColumn(column, 'desc')">
          {{ 'table.sort' | t}}
          <span *ngIf="column?.config.sortType === 'number'">9&rarr;0</span>
          <span *ngIf="column?.config.sortType !== 'number'">Z&rarr;A</span>
        </a>
      </li>

      <!-- NOTE: do not display divider when adding columns is disabled -->
      <li *ngIf="!isSortingDisabled(column) && changeVisibility" class="divider dropdown-divider"></li>
      <!-- NOTE: should it be disabled when there are no columns to add  -->
      <li *ngIf="changeVisibility">
        <a [class.disabled]="hasAllColumnsVisble" class="dropdown-item" (click)="!hasAllColumnsVisble && addCombobox.emit(0)">
          {{ 'table.addLeft' | t}}
        </a>
      </li>

      <li *ngIf="changeVisibility">
        <a [class.disabled]="hasAllColumnsVisble" class="dropdown-item" (click)="!hasAllColumnsVisble && addCombobox.emit(1)">
          {{ 'table.addRight' | t}}
        </a>
      </li>

      <li *ngIf="column?.config.subFields" class="divider dropdown-divider"></li>
      <li *ngIf="column?.config.subFields" class="dropdown-item-group" dropdown-not-closable-zone>
        <span class="dropdown-header">{{ 'table.subFields' | t}}</span>

        <div *ngFor="let subfield of column?.config.subFields">
          <label class="dropdown-item c-input c-checkbox">
            <input type="checkbox"
                (change)="onToggleSubfield(column, subfield.id)"
                [checked]="subfield.isVisible"
            >
            <span class="c-indicator"></span>
            {{subfield.text || subfield.id }}
          </label>
        </div>
      </li>

      <li *ngIf="changeVisibility" class="divider dropdown-divider"></li>
      <li *ngIf="changeVisibility">
        <!-- disable removing column if it's the last one  -->
        <!-- NOTE: is there a better way how to indicate that -->
        <a
        [class.disabled]="visibleColumns.length === 1"
        class="dropdown-item"
        (click)="isLastColumn && onRemoveColumn(column?.config.id)">
          {{ 'table.removeColumn' | t}}
        </a>
      </li>

    </ul>
  </div>
</div>
