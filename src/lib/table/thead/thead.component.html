<ng-content></ng-content>

<tr *ngIf="!customTemplate">
  <template  ngFor let-columnName [ngForOf]="visibleColumns" let-columnIndex="index">
    <th *ngIf="addingColumnIndex == columnIndex" class="combo-th">
      <div class="add-column combobox is-active">
        <iw-add-column
          [visibleColumns]="visibleColumns"
          (close)="onAddCombobox(undefined)"
          (selected)="selectNewColumn($event, columnIndex)"
          attr.id="combobox-{{columnIndex}}">
        </iw-add-column>
      </div>
    </th>
    <th
      iw-th
      [column]="column(columnName)"
      [changeVisibility]="changeColumnVisibility"
      (removeColumn)="removeColumn.emit($event)"
      (sortColumn)="onSortColumn($event)"
      (addCombobox)="onAddCombobox($event + columnIndex)"
      (toggleSubfield)="onToggleSubfield($event)"
      class="drag-column"
      attr.data-col-ref="{{ column(columnName)?.config.id }}"
      attr.id="col-id-{{ column(columnName)?.config.id }}"
      [class.is-sorted]="isSorted(column(columnName))"
      [class.is-sorted--asc]="isSorted(column(columnName), 'asc')"
      [class.is-sorted--desc]="isSorted(column(columnName), 'desc')">
    </th>
  </template>
  <th *ngIf="changeColumnVisibility" class="combo-th">
    <div class="add-column combobox" [ngClass]="lastColumnComboboxActive ? 'is-active' : 'is-inactive'">
      <iw-add-column
        *ngIf="lastColumnComboboxActive"
        [visibleColumns]="visibleColumns"
        (close)="toggleCombobox()"
        (selected)="selectNewColumn($event)"
      ></iw-add-column>
      <span
        *ngIf="!lastColumnComboboxActive"
        (click)="toggleCombobox()"
        class="add-column-button combo-toggle btn btn-sm btn-success"
      >+</span>
    </div>
  </th>
</tr>
